var TrimPath;(function(){var r;TrimPath==null&&(TrimPath={}),TrimPath.evalEx==null&&(TrimPath.evalEx=function(src){return eval(src)}),Array.prototype.pop==null&&(Array.prototype.pop=function(){return this.length===0?r:this[--this.length]}),Array.prototype.push==null&&(Array.prototype.push=function(){for(var n=0;n<arguments.length;++n)this[this.length]=arguments[n];return this.length}),TrimPath.parseTemplate=function(n,t,i){i==null&&(i=TrimPath.parseTemplate_etc);var r=u(n,t,i),f=TrimPath.evalEx(r,t,1);return f!=null?new i.Template(t,n,r,f,i):null};try{String.prototype.process=function(n,t){var i=TrimPath.parseTemplate(this,null);return i!=null?i.process(n,t):this}}catch(h){}TrimPath.parseTemplate_etc={},TrimPath.parseTemplate_etc.statementTag="forelse|for|if|elseif|else|var|macro",TrimPath.parseTemplate_etc.statementDef={"if":{delta:1,prefix:"if (",suffix:") {",paramMin:1},"else":{delta:0,prefix:"} else {"},elseif:{delta:0,prefix:"} else if (",suffix:") {",paramDefault:"true"},"/if":{delta:-1,prefix:"}"},"for":{delta:1,paramMin:3,prefixFunc:function(n,t,i,r){if(n[2]!="in")throw new r.ParseError(i,t.line,"bad for loop statement: "+n.join(" "));var u=n[1],f="__LIST__"+u;return["var ",f," = ",n[3],";","var __LENGTH_STACK__;","if (typeof(__LENGTH_STACK__) == 'undefined' || !__LENGTH_STACK__.length) __LENGTH_STACK__ = new Array();","__LENGTH_STACK__[__LENGTH_STACK__.length] = 0;","if ((",f,") != null) { ","var ",u,"_ct = 0;","for (var ",u,"_index in ",f,") { ",u,"_ct++;","if (typeof(",f,"[",u,"_index]) == 'function') {continue;}","__LENGTH_STACK__[__LENGTH_STACK__.length - 1]++;","var ",u," = ",f,"[",u,"_index];"].join("")}},forelse:{delta:0,prefix:"} } if (__LENGTH_STACK__[__LENGTH_STACK__.length - 1] == 0) { if (",suffix:") {",paramDefault:"true"},"/for":{delta:-1,prefix:"} }; delete __LENGTH_STACK__[__LENGTH_STACK__.length - 1];"},"var":{delta:0,prefix:"var ",suffix:";"},macro:{delta:1,prefixFunc:function(n){var t=n[1].split("(")[0];return["var ",t," = function",n.slice(1).join(" ").substring(t.length),"{ var _OUT_arr = []; var _OUT = { write: function(m) { if (m) _OUT_arr.push(m); } }; "].join("")}},"/macro":{delta:-1,prefix:" return _OUT_arr.join(''); };"}},TrimPath.parseTemplate_etc.modifierDef={eat:function(){return""},escape:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},capitalize:function(n){return String(n).toUpperCase()},"default":function(n,t){return n!=null?n:t}},TrimPath.parseTemplate_etc.modifierDef.h=TrimPath.parseTemplate_etc.modifierDef.escape,TrimPath.parseTemplate_etc.Template=function(n,t,i,r,u){this.process=function(n,t){var f,e,s,o;n==null&&(n={}),n._MODIFIERS==null&&(n._MODIFIERS={}),n.defined==null&&(n.defined=function(t){return n[t]!=undefined});for(f in u.modifierDef)n._MODIFIERS[f]==null&&(n._MODIFIERS[f]=u.modifierDef[f]);t==null&&(t={}),e=[],s={write:function(n){e.push(n)}};try{r(s,n,t)}catch(i){if(t.throwExceptions==!0)throw i;return o=new String(e.join("")+"[ERROR: "+i.toString()+(i.message?"; "+i.message:"")+"]"),o.exception=i,o}return e.join("")},this.name=n,this.source=t,this.sourceFunc=i,this.toString=function(){return"TrimPath.Template ["+n+"]"}},TrimPath.parseTemplate_etc.ParseError=function(n,t,i){this.name=n,this.line=t,this.message=i},TrimPath.parseTemplate_etc.ParseError.prototype.toString=function(){return"TrimPath template ParseError in "+this.name+": line "+this.line+", "+this.message};var u=function(i,r,u){var e,k,w,a,d,l;i=o(i);for(var h=["var TrimPath_Template_TEMP = function(_OUT, _CONTEXT, _FLAGS) { with (_CONTEXT) {"],p={stack:[],line:1},c=-1;c+1<i.length;){for(e=c,e=i.indexOf("{",e+1);e>=0;){var l=i.indexOf("}",e+1),nt=i.substring(e,l),g=nt.match(/^\{(cdata|minify|eval)/);if(g){var v=g[1],b=e+v.length+1,y=i.indexOf("}",b);y>=0&&(k=y-b<=0?"{/"+v+"}":i.substring(b+1,y),w=i.indexOf(k,y+1),w>=0&&(n(i.substring(c+1,e),h),a=i.substring(y+1,w),v=="cdata"?t(a,h):v=="minify"?t(s(a),h):v=="eval"&&a!=null&&a.length>0&&h.push("_OUT.write( (function() { "+a+" })() );"),e=c=w+k.length-1))}else if(i.charAt(e-1)!="$"&&i.charAt(e-1)!="\\"&&(d=i.charAt(e+1)=="/"?2:1,i.substring(e+d,e+10+d).search(TrimPath.parseTemplate_etc.statementTag)==0))break;e=i.indexOf("{",e+1)}if(e<0)break;if(l=i.indexOf("}",e+1),l<0)break;n(i.substring(c+1,e),h),f(i.substring(e,l+1),p,h,r,u),c=l}if(n(i.substring(c+1),h),p.stack.length!=0)throw new u.ParseError(r,p.line,"unclosed, unmatched statement(s): "+p.stack.join(","));return h.push("}}; TrimPath_Template_TEMP"),h.join("")},f=function(t,i,r,u,f){var o=t.slice(1,-1).split(" "),e=f.statementDef[o[0]],s;if(e==null){n(t,r);return}if(e.delta<0){if(i.stack.length<=0)throw new f.ParseError(u,i.line,"close tag does not match any previous statement: "+t);i.stack.pop()}if(e.delta>0&&i.stack.push(t),e.paramMin!=null&&e.paramMin>=o.length)throw new f.ParseError(u,i.line,"statement needs more parameters: "+t);if(e.prefixFunc!=null?r.push(e.prefixFunc(o,i,u,f)):r.push(e.prefix),e.suffix!=null){if(o.length<=1)e.paramDefault!=null&&r.push(e.paramDefault);else for(s=1;s<o.length;s++)s>1&&r.push(" "),r.push(o[s]);r.push(e.suffix)}},n=function(n,t){var u,r,o,f,i;if(!(n.length<=0)){for(u=0,r=n.length-1;u<n.length&&n.charAt(u)=="\n";)u++;while(r>=0&&(n.charAt(r)==" "||n.charAt(r)=="\t"))r--;for(r<u&&(r=u),u>0&&(t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("'),i=n.substring(0,u).replace("\n","\\n"),i.charAt(i.length-1)=="\n"&&(i=i.substring(0,i.length-1)),t.push(i),t.push('");')),o=n.substring(u,r+1).split("\n"),f=0;f<o.length;f++)e(o[f],t),f<o.length-1&&t.push('_OUT.write("\\n");\n');r+1<n.length&&(t.push('if (_FLAGS.keepWhitespace == true) _OUT.write("'),i=n.substring(r+1).replace("\n","\\n"),i.charAt(i.length-1)=="\n"&&(i=i.substring(0,i.length-1)),t.push(i),t.push('");'))}},e=function(n,r){for(var f="}",e=-1,h,u,c;e+f.length<n.length;){var s="${",l="}",o=n.indexOf(s,e+f.length);if(o<0)break;if(n.charAt(o+2)=="%"&&(s="${%",l="%}"),h=n.indexOf(l,o+s.length),h<0)break;t(n.substring(e+f.length,o),r),u=n.substring(o+s.length,h).replace(/\|\|/g,"#@@#").split("|");for(c in u)u[c].replace&&(u[c]=u[c].replace(/#@@#/g,"||"));r.push("_OUT.write("),i(u,u.length-1,r),r.push(");"),e=h,f=l}t(n.substring(e+f.length),r)},t=function(n,t){n==null||n.length<=0||(n=n.replace(/\\/g,"\\\\"),n=n.replace(/\n/g,"\\n"),n=n.replace(/"/g,'\\"'),t.push('_OUT.write("'),t.push(n),t.push('");'))},i=function(n,t,r){var f=n[t],u;if(t<=0){r.push(f);return}u=f.split(":"),r.push('_MODIFIERS["'),r.push(u[0]),r.push('"]('),i(n,t-1,r),u.length>1&&(r.push(","),r.push(u[1])),r.push(")")},o=function(n){return n=n.replace(/\t/g,"    "),n=n.replace(/\r\n/g,"\n"),n=n.replace(/\r/g,"\n"),n.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1")},s=function(n){return n=n.replace(/^\s+/g,""),n=n.replace(/\s+$/g,""),n=n.replace(/\s+/g," "),n.replace(/^(\s*\S*(\s+\S+)*)\s*$/,"$1")};TrimPath.parseDOMTemplate=function(n,t,i){t==null&&(t=document);var u=t.getElementById(n),r=u.value;return r==null&&(r=u.innerHTML),r=r.replace(/&lt;/g,"<").replace(/&gt;/g,">"),TrimPath.parseTemplate(r,n,i)},TrimPath.processDOMTemplate=function(n,t,i,r,u){return TrimPath.parseDOMTemplate(n,r,u).process(t,i)}})();
//@ sourceMappingURL=trimpath-template-1.0.38.min.js.map